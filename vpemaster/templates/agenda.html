{% extends "base.html" %}

{% block title %}Meeting Agenda{% endblock %}

{% block content %}
    <h1>Meeting Agenda</h1>

    <div class="button-group">
        <form action="{{ url_for('agenda_bp.import_agenda_from_csv') }}" method="post" enctype="multipart/form-data" class="form-inline">
            <input type="file" name="file" id="agenda-file" style="display: none;" onchange="this.form.submit()">
            <button type="button" class="add-button" onclick="document.getElementById('agenda-file').click()">Import Data</button>
        </form>
        <form action="{{ url_for('agenda_bp.export_agenda_to_csv') }}" method="get" class="form-inline">
            <button type="submit" class="add-button">Export to CSV</button>
        </form>
    </div>

    <table>
        <thead>
            <tr>
                <th>Time</th>
                <th>Title</th>
                <th>Owner</th>
                <th>Duration (min)</th>
            </tr>
        </thead>
        <tbody>
            {% for item in agenda_items %}
                {% if item.is_section %}
                    <tr class="section-row">
                        <td colspan="4">{{ item.title }}</td>
                    </tr>
                {% else %}
                    <tr>
                        <td>{{ item.time }}</td>
                        <td>{{ item.title }}</td>
                        <td>{{ item.owner }}</td>
                        <td>{{ item.duration }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
