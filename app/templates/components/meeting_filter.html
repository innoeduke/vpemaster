{% macro render_meeting_filter(meetings, selected_id, base_url='', label='Meeting:', data_format='tuple',
extra_classes='', extra_style='', select_id='meeting-filter', is_disabled=False, render_outer_container=True, show_icon=True) %}
{% if render_outer_container %}
<div class="{{ 'inline-filter-group' if label else 'booking-filter-container' }} {{ extra_classes }}"
    style="{{ extra_style }}">
    {% endif %}
    {% if label %}
    <label for="{{ select_id }}">{{ label }}</label>
    {% else %}
    <div class="filter-left">
        {% if show_icon %}
        <i class="fas fa-calendar-alt"></i>
        {% endif %}
    {% endif %}

        <select id="{{ select_id }}" {% if base_url %}onchange="window.location.href = '{{ base_url }}/' + this.value;"
            {% endif %} {% if not label %}style="font-size: 1.1em; font-weight: bold; padding: 5px 0;" {% endif %} {% if
            is_disabled %}disabled{% endif %}>
            {% for item in meetings %}
            {% if data_format == 'tuple' %}
            {% set num = item[0] %}
            {% set date = item[1] %}
            {% set status = item[2] if item|length > 2 else none %}
            {% else %}
            {% set num = item.Meeting_Number %}
            {% set date = item.Meeting_Date %}
            {% set status = item.status if item.status else none %}
            {% endif %}

            {# Determine status icon and label #}
            {% if status == 'unpublished' %}
            {% set status_icon = 'ğŸ”’' %}
            {% set status_label = 'Unpublished' %}
            {% elif status == 'not started' %}
            {% set status_icon = 'â–¶ï¸' %}
            {% set status_label = 'Not Started' %}
            {% elif status == 'running' %}
            {% set status_icon = 'ğŸ”´' %}
            {% set status_label = 'Running' %}
            {% elif status == 'finished' %}
            {% set status_icon = 'âœ…' %}
            {% set status_label = 'Finished' %}
            {% elif status == 'cancelled' %}
            {% set status_icon = 'ğŸš«' %}
            {% set status_label = 'Cancelled' %}
            {% else %}
            {% set status_icon = '' %}
            {% set status_label = '' %}
            {% endif %}

            <option value="{{ num }}" {% if selected_id and num==selected_id %}selected{% endif %}>
                {{ status_icon }} #{{ num }} - {{ date.strftime('%B %d, %Y') if date else 'No Date' }}{% if status_label
                %} ({{ status_label }}){% endif %}
            </option>
            {% endfor %}
        </select>

        {% if not label %}
    </div>
    {% endif %}
    {% if render_outer_container %}
</div>
{% endif %}
{% endmacro %}