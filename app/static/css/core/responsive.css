/* --- Orientation Warning Overlay --- */
.orientation-warning {
    display: none;
    /* Hidden by default */
    position: fixed;
    /* Make it an overlay */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(244, 244, 249, 0.98);
    /* Use a slightly transparent background from your theme */
    z-index: 2000;
    /* Ensure it's on top of other content */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
}

.orientation-warning .warning-icon {
    font-size: 4em;
    /* Much larger icon */
    color: #772432;
    /* Use your theme's primary color */
    margin-bottom: 25px;
    animation: rotate-animation 2.5s infinite ease-in-out;
    /* Add animation */
}

.orientation-warning h2 {
    font-size: 1.4em;
    color: #333;
    margin: 0 0 10px 0;
}

.orientation-warning p {
    font-size: 1em;
    color: #666;
    max-width: 320px;
    margin: 0;
    line-height: 1.5;
}

/* The animation for the icon */
@keyframes rotate-animation {
    0% {
        transform: rotate(0deg);
    }

    40% {
        transform: rotate(90deg);
    }

    60% {
        transform: rotate(90deg);
    }

    100% {
        transform: rotate(0deg);
    }
}

@media (max-width: 768px) and (orientation: portrait) {

    /* Only show the warning when edit mode is active on mobile phones */
    .edit-mode-active .orientation-warning {
        display: flex;
        /* Change to flex to enable centering */
    }

    /* Hide everything else to remove distractions */
    .edit-mode-active .table-container,
    .edit-mode-active .action-bar,
    .edit-mode-active h1 {
        display: none;
    }
}

@media (max-width: 992px) {

    .container-wrapper {
        display: block;
    }

    /* Generic Split Container */
    .split-container {
        flex-direction: column;
    }

    /* Hide the PC version of the nav toggle button */
    .nav-pane .nav-toggle {
        display: none;
    }

    /* The page header for mobile/tablet (both get solid #333 background) */
    .page-header {
        left: 0;
        width: 100%;
        background-color: #333;
        color: white;
        padding: 0 25px;
        /* Consistent margin for both edges */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
        z-index: 1005;
        /* Increased to stay above chart overlays */
        height: 60px;
    }

    .header-left {
        display: flex;
        align-items: center;
        flex: 1;
        /* Allow left side to take remaining space */
        min-width: 0;
        /* Allow title to shrink if needed */
        position: relative;
        z-index: 2;
        /* Above header-right */
    }

    .header-right {
        display: flex;
        align-items: center;
        flex: 0 0 auto;
        /* Profile stays fixed size */
        justify-content: flex-end;
        position: relative;
        z-index: 1;
    }

    /* Explicit profile container configuration for mobile/tablet */
    .profile-container {
        position: relative;
        z-index: 1002;
        margin-left: auto;
        display: flex;
    }

    .page-header .nav-toggle {
        display: block;
        font-size: 1.5rem;
        cursor: pointer;
        color: white;
        text-decoration: none;
        flex-shrink: 0;
    }

    .header-title {
        display: block;
        color: white;
        margin: 0 0 0 15px;
        font-size: 1.1rem;
        text-align: left;
        /* Force override of global h1 centering */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .profile-trigger {
        background-color: rgba(255, 255, 255, 0.15);
        /* More distinct background */
        border-color: rgba(255, 255, 255, 0.25);
        color: white;
        padding: 8px 16px;
        /* Increased internal padding for breathing room */
        border-radius: 20px;
    }

    .profile-trigger:hover,
    .profile-trigger:active,
    .profile-trigger:focus {
        background-color: rgba(255, 255, 255, 0.25);
        /* Slightly brighter but still dark enough for white text */
    }

    .profile-trigger i,
    .profile-trigger span {
        color: white;
    }

    /* The nav pane itself is now a slide-in menu */
    .nav-pane {
        position: fixed;
        top: 0;
        left: 0;
        width: 250px;
        height: 100%;
        z-index: 1003;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        overflow-y: auto;
        padding-top: 20px;
    }

    .nav-pane.expanded {
        transform: translateX(0);
    }

    /* Show nav titles and text on mobile */
    .nav-pane .nav-header {
        display: flex;
        justify-content: center;
    }

    .nav-pane h2 {
        opacity: 1;
    }

    .nav-pane ul li a span {
        opacity: 1;
    }

    /* --- Nav Pane Overlay Styles for Mobile --- */
    #nav-overlay {
        display: none;
        /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        /* Semi-transparent black */
        z-index: 1002;
        /* Below nav-pane, above everything else */
    }

    .nav-pane.expanded+#nav-overlay {
        display: block;
        /* Show the overlay when nav is expanded */
    }

    /* Adjust main content to not be covered by the fixed header */
    .main-content {
        margin-left: 0;
        width: 100%;
        padding-top: 80px;
    }

    h1 {
        font-size: 1.5rem;
    }

    h3 {
        font-size: 1.2rem;
    }
}

/* PC/Desktop specific overrides for page-header */
@media (min-width: 993px) {
    .page-header .nav-toggle {
        display: none;
    }

    .page-header {
        background-color: transparent;
        box-shadow: none;
    }
}